(window.webpackJsonp=window.webpackJsonp||[]).push([[7,3,4,5,6],{289:function(t,e,n){var content=n(294);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(110).default)("55ff8e40",content,!0,{sourceMap:!1})},290:function(t,e,n){"use strict";n.r(e);n(31),n(13);var r={name:"TodosFilter",props:{isDisabled:{type:Boolean,default:!1}},data:function(){return{}},computed:{title:{get:function(){return this.$store.state.todos.filter.title},set:function(t){this.$store.commit("todos/filter",{field:"title",value:t})}}}},o=n(46),component=Object(o.a)(r,(function(){var t=this;return(0,t._self._c)("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],attrs:{type:"text",placeholder:"Filter by title",disabled:t.isDisabled},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})}),[],!1,null,null,null);e.default=component.exports},291:function(t,e,n){"use strict";n.r(e);n(29),n(31),n(13);var r={name:"TodosList",props:{todos:{type:Array,required:!0}},computed:{filterTitle:function(){return this.$store.state.todos.filter.title}}},o=n(46),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"todos-list"},[t.todos.length?t._e():e("div",{staticClass:"todos-list_empty"},[t._v("\n        There are no todo's\n        "),t.filterTitle?e("span",[t._v("with keyword "),e("b",[t._v(t._s(t.filterTitle))])]):t._e()]),t._v(" "),t._l(t.todos,(function(n){return e("div",{key:n.id,staticClass:"todos_item"},[e("div",{class:["todos-list_status",{"todos-list_status__completed":n.completed}]},[n.completed?e("i",{staticClass:"fa-regular fa-circle-check"}):e("i",{staticClass:"fa-regular fa-circle-xmark"})]),t._v(" "),e("div",{staticClass:"todos-list_content"},[e("div",{staticClass:"todos-list_title"},[t._v(t._s(n.title))]),t._v(" "),e("div",{staticClass:"todos-list_author"},[t._v("\n                Author: "),e("span",[t._v(t._s(n.user.name))])])])])}))],2)}),[],!1,null,null,null);e.default=component.exports},292:function(t,e,n){"use strict";n.r(e);n(41),n(32),n(31),n(13),n(64),n(33),n(65);var r=n(28);function o(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var c={name:"PaginationComponent",props:{pagination:{type:Object,required:!0,validator:function(t){return!isNaN(t.limit)&&!isNaN(t.current)&&!isNaN(t.last)}}},computed:{previousPage:function(){var t=this.pagination.current-1;return t<=1?void 0:t},nextPage:function(){var t=this.pagination.current+1;return t>this.pagination.last?this.pagination.last:t},lastPage:function(){return this.pagination.last},pages:function(){var t=[this.pagination.current];return this.pagination.current-1>=1&&t.unshift(this.pagination.current-1),this.pagination.current+1<=this.pagination.last&&t.push(this.pagination.current+1),t.length<3&&this.pagination.current+2<=this.pagination.last&&t.push(this.pagination.current+2),t.length<3&&this.pagination.current-2>1&&t.unshift(this.pagination.current-2),t}}},d=n(46),component=Object(d.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"pagination"},[e("nuxt-link",{attrs:{to:"/"}},[t._v(" First ")]),t._v(" "),e("nuxt-link",{attrs:{to:{query:{page:t.previousPage}}}},[t._v("\n        Prev\n    ")]),t._v(" "),t._l(t.pages,(function(n,r){return e("nuxt-link",{key:r,attrs:{to:{query:l(l({},t.$route.query),{},{page:n>1?n:void 0})}}},[t._v("\n        "+t._s(n)+"\n    ")])})),t._v(" "),e("nuxt-link",{attrs:{to:{query:{page:t.nextPage}}}},[t._v("\n        Next\n    ")]),t._v(" "),e("nuxt-link",{attrs:{to:{query:{page:t.lastPage}}}},[t._v("\n        Last\n    ")])],2)}),[],!1,null,null,null);e.default=component.exports},293:function(t,e,n){"use strict";n(289)},294:function(t,e,n){var r=n(109)(!1);r.push([t.i,"",""]),t.exports=r},300:function(t,e,n){"use strict";n.r(e);var r=n(24),o=n(10),l=(n(66),n(295),n(81),n(31),n(13),n(26),n(67),n(34),n(35),n(296),n(47),n(297),n(298)),c=n.n(l),d={name:"TodosComponent",data:function(){return{loading:!0,usersData:[],todosData:[],pagination:{limit:25,current:1,last:1}}},fetch:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,l,d,f,v,h,_,m,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,t.pagination.current=Number(t.$route.query.page||1),n=t.$axios.get("/api/users"),o=t.$axios.get("/api/todos?_page=".concat(t.pagination.current,"&_limit=").concat(t.pagination.limit,"&title_like=").concat(t.filter.title)),t.$route.query.page<=1&&t.$router.replace({query:{page:void 0}}),e.prev=5,e.next=8,Promise.all([n,o]);case 8:l=e.sent,d=Object(r.a)(l,2),f=d[0].data,v=d[1],h=v.data,_=v.headers.link,t.usersData=f,t.todosData=h,_?(m=c()(_),y=m.last._page,t.pagination.last=Number(y)):t.pagination.last=1,e.next=22;break;case 19:throw e.prev=19,e.t0=e.catch(5),new Error(e.t0.message);case 22:t.loading=!1;case 23:case"end":return e.stop()}}),e,null,[[5,19]])})))()},fetchOnServer:!1,computed:{filter:function(){return this.$store.state.todos.filter},todos:function(){var t=this;return this.todosData.map((function(e){return e.user=t.usersData.find((function(t){return t.id===e.userId})),e}))}},watch:{"filter.title":{handler:function(){this.$route.query.page&&this.$route.query.page!==this.pagination.current?this.$router.replace({query:{page:void 0}}):this.$fetch()}},"$route.query.page":{handler:function(){this.$fetch()}}},activated:function(){this.$fetchState.timestamp<=Date.now()-3e4&&this.$fetch()}},f=(n(293),n(46)),component=Object(f.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"todos"},[e("div",{staticClass:"todos_header"},[e("div",{staticClass:"todos_logo"},[t._v("TODO'S")]),t._v(" "),e("TodosFilter",{attrs:{"is-disabled":t.$fetchState.error}})],1),t._v(" "),t.$fetchState.error?e("div",{staticClass:"error"},[t._v("\n        "+t._s(t.$fetchState.error.message)+"\n    ")]):t._e(),t._v(" "),t.loading&&!t.$fetchState.error?e("LoaderIndicator",{attrs:{"is-block":"","is-loading":t.loading}}):e("TodosList",{attrs:{todos:t.todos}}),t._v(" "),t.$fetchState.error||t.$fetchState.pending?t._e():e("Pagination",{attrs:{pagination:t.pagination}})],1)}),[],!1,null,"294552b6",null);e.default=component.exports;installComponents(component,{TodosFilter:n(290).default,LoaderIndicator:n(136).default,TodosList:n(291).default,Pagination:n(292).default})},313:function(t,e,n){"use strict";n.r(e);var r={name:"IndexPage"},o=n(46),component=Object(o.a)(r,(function(){var t=this._self._c;return t("div",{staticClass:"container"},[t("Todos")],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Todos:n(300).default})}}]);